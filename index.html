<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZMX TRADER V1</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700;800&family=Rajdhani:wght@500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #00f0ff;
            --primary-dark: #00a8ff;
            --primary-light: rgba(0, 240, 255, 0.1);
            --secondary: #ff3860;
            --background: #0a0e1a;
            --card-bg: #121a2a;
            --card-bg-light: #1a243a;
            --text: #f0f8ff;
            --text-secondary: #94a3b8;
            --border: rgba(0, 240, 255, 0.15);
            --success: #00ff9d;
            --danger: #ff3860;
            --warning: #ffb800;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background-color: var(--background);
            color: var(--text);
            font-family: 'Rajdhani', sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(0, 240, 255, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(0, 168, 255, 0.03) 0%, transparent 50%);
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 900px;
            margin: 20px auto;
            padding: 30px;
            background: var(--card-bg);
            border-radius: 16px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border);
            animation: containerGlow 6s infinite alternate;
        }

        @keyframes containerGlow {
            0% { box-shadow: 0 0 30px rgba(0, 240, 255, 0.1); }
            50% { box-shadow: 0 0 50px rgba(0, 168, 255, 0.2); }
            100% { box-shadow: 0 0 30px rgba(0, 240, 255, 0.1); }
        }

        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--primary-dark));
            animation: borderFlow 3s linear infinite;
            background-size: 200% 100%;
        }

        @keyframes borderFlow {
            0% { background-position: 0% 50%; }
            100% { background-position: 100% 50%; }
        }

        .header {
            margin-bottom: 30px;
            text-align: center;
            position: relative;
            z-index: 2;
        }

        .title {
            font-family: 'Orbitron', sans-serif;
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(90deg, var(--primary), var(--primary-dark));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-bottom: 15px;
            position: relative;
            display: inline-block;
            text-shadow: 0 0 20px rgba(0, 240, 255, 0.3);
            animation: titleGlow 3s ease-in-out infinite alternate;
        }

        @keyframes titleGlow {
            0% { text-shadow: 0 0 20px rgba(0, 240, 255, 0.3); }
            100% { text-shadow: 0 0 40px rgba(0, 168, 255, 0.5); }
        }

        .title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), transparent);
            border-radius: 4px;
            animation: linePulse 2s infinite;
        }

        @keyframes linePulse {
            0%, 100% { width: 150px; opacity: 1; }
            50% { width: 200px; opacity: 0.8; }
        }

        .subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 25px;
            letter-spacing: 1px;
            font-weight: 500;
        }

        .period-display {
            font-size: 1.1rem;
            color: var(--primary);
            margin-bottom: 30px;
            padding: 12px 25px;
            background: rgba(0, 240, 255, 0.08);
            border-radius: 50px;
            display: inline-flex;
            align-items: center;
            gap: 12px;
            border: 1px solid var(--border);
            font-weight: 600;
            animation: fadeIn 1s ease-out;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: var(--primary);
            box-shadow: 0 0 15px var(--primary);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }

        .prediction-card {
            padding: 30px;
            border-radius: 14px;
            background: var(--card-bg-light);
            border: 1px solid var(--border);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            margin-bottom: 30px;
            animation: cardAppear 0.8s ease-out;
        }

        @keyframes cardAppear {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .prediction-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--primary-dark));
        }

        .prediction-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
        }

        .card-title {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            letter-spacing: 1px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .prediction-value {
            font-size: 3.5rem;
            font-weight: 700;
            font-family: 'Orbitron', sans-serif;
            text-align: center;
            margin: 20px 0;
            transition: all 0.4s ease;
            text-shadow: 0 0 20px rgba(0, 240, 255, 0.3);
            animation: textGlow 3s infinite alternate;
        }

        @keyframes textGlow {
            0% { text-shadow: 0 0 20px rgba(0, 240, 255, 0.3); }
            100% { text-shadow: 0 0 30px rgba(0, 168, 255, 0.5); }
        }

        .big {
            color: var(--primary);
        }

        .small {
            color: var(--secondary);
        }

        .confidence-container {
            margin-top: 25px;
        }

        .confidence-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .confidence-meter {
            height: 8px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
            overflow: hidden;
            position: relative;
        }

        .confidence-level {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--primary-dark));
            width: 0;
            transition: width 1s cubic-bezier(0.34, 1.56, 0.64, 1);
            border-radius: 4px;
            position: relative;
            overflow: hidden;
        }

        .confidence-level::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                            rgba(255,255,255,0) 0%, 
                            rgba(255,255,255,0.3) 50%, 
                            rgba(255,255,255,0) 100%);
            animation: shine 2s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .history-container {
            margin-top: 30px;
            animation: fadeIn 1s ease-out;
        }

        .history-title {
            font-size: 1.3rem;
            color: var(--text);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            letter-spacing: 1px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .history-box {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid var(--border);
            border-radius: 12px;
            background: var(--card-bg-light);
            scrollbar-width: thin;
            scrollbar-color: var(--primary) transparent;
        }

        .history-box::-webkit-scrollbar {
            width: 6px;
        }

        .history-box::-webkit-scrollbar-track {
            background: transparent;
        }

        .history-box::-webkit-scrollbar-thumb {
            background-color: var(--primary);
            border-radius: 3px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 16px 20px;
            text-align: center;
            border-bottom: 1px solid var(--border);
        }

        th {
            background-color: rgba(0, 240, 255, 0.05);
            color: var(--text-secondary);
            font-weight: 600;
            position: sticky;
            top: 0;
            backdrop-filter: blur(5px);
            letter-spacing: 1px;
            text-transform: uppercase;
            font-size: 0.9rem;
        }

        td {
            color: var(--text);
            font-weight: 500;
            font-size: 1rem;
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:hover {
            background-color: rgba(0, 240, 255, 0.03);
        }

        .win {
            color: var(--success);
            font-weight: 600;
            position: relative;
        }

        .win::before {
            content: '✓';
            margin-right: 8px;
        }

        .loss {
            color: var(--danger);
            font-weight: 600;
            position: relative;
        }

        .loss::before {
            content: '✗';
            margin-right: 8px;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(0, 240, 255, 0.2);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s linear infinite;
            vertical-align: middle;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .footer {
            margin-top: 40px;
            font-size: 0.8rem;
            color: var(--text-secondary);
            text-align: center;
            letter-spacing: 1px;
            opacity: 0.7;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .highlight {
            animation: highlight 1.5s ease-out;
        }

        @keyframes highlight {
            0% { background-color: rgba(0, 240, 255, 0.1); }
            100% { background-color: transparent; }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            .title {
                font-size: 2.2rem;
            }
            
            .prediction-card {
                padding: 25px;
            }
            
            .prediction-value {
                font-size: 2.8rem;
            }
            
            th, td {
                padding: 14px 16px;
            }
        }

        @media (max-width: 480px) {
            .title {
                font-size: 1.8rem;
            }
            
            .period-display {
                font-size: 1rem;
                padding: 10px 20px;
            }
            
            .prediction-value {
                font-size: 2.2rem;
            }
            
            th, td {
                padding: 12px 14px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">ZMX TRADER V1</h1>
            <p class="subtitle"></p>
            <div class="period-display">
                <span class="status-indicator"></span>
                <span id="period">LOADING...</span>
            </div>
        </div>

        <div class="prediction-card">
            <h2 class="card-title"></h2>
            <div id="current-prediction" class="prediction-value">-</div>
            
            <div class="confidence-container">
                <div class="confidence-label">
                    <span></span>
                    <span id="confidence-percent">0%</span>
                </div>
                <div class="confidence-meter">
                    <div id="confidence-level" class="confidence-level"></div>
                </div>
            </div>
        </div>

        <div class="history-container">
            <h2 class="history-title">HISTORY</h2>
            <div class="history-box">
                <table id="result-history">
                    <thead>
                        <tr>
                            <th>PERIOD</th>
                            <th>PREDICTION</th>
                            <th>RESULT</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Results will be inserted here -->
                    </tbody>
                </table>
            </div>
        </div>

        <div class="footer">

        </div>
    </div>

    <script>
        // Configuration
        const config = {
            updateInterval: 5000, // 5 seconds
            maxHistoryItems: 15,
            apiEndpoint: "https://api.bdg88zf.com/api/webapi/GetNoaverageEmerdList",
            apiHeaders: {
                "Content-Type": "application/json"
            }
        };

        // State management
        let state = {
            lastFetchedPeriod: null,
            currentPeriod: null,
            currentPrediction: null,
            history: [],
            strategies: [
                { name: "Euler Sum+Product", fn: logicEuler, weight: 1.2 },
                { name: "Prime Sum", fn: logicPrimeSum, weight: 1.1 },
                { name: "Odd/Even Sum", fn: logicOddEven, weight: 1.0 },
                { name: "Repeat Pattern", fn: logicRepeatPattern, weight: 0.9 },
                { name: "Digit Trend", fn: logicDigitTrend, weight: 0.9 },
                { name: "Middle Avg", fn: logicMiddleAvg, weight: 1.0 },
                { name: "Trap Avoidance", fn: logicTrapAvoidance, weight: 1.1 },
                { name: "Fibonacci Weight", fn: logicFibWeight, weight: 1.2 }
            ]
        };

        // DOM Elements
        const elements = {
            period: document.getElementById('period'),
            currentPrediction: document.getElementById('current-prediction'),
            confidenceLevel: document.getElementById('confidence-level'),
            confidencePercent: document.getElementById('confidence-percent'),
            historyTable: document.getElementById('result-history').querySelector('tbody')
        };

        // Prime checker
        function isPrime(n) {
            if (n <= 1) return false;
            if (n <= 3) return true;
            if (n % 2 === 0 || n % 3 === 0) return false;
            for (let i = 5; i * i <= n; i += 6) {
                if (n % i === 0 || n % (i + 2) === 0) return false;
            }
            return true;
        }

        // Prediction strategies
        function logicEuler(periodNumber) {
            const digits = periodNumber.slice(-4).split('').map(Number);
            const totalSum = digits.reduce((a, b) => a + b, 0);
            const totalProduct = digits.reduce((a, b) => a * b, 1);
            const val = (totalSum + totalProduct) % 10;
            return {
                prediction: val >= 5 ? 'BIG' : 'SMALL',
                confidence: Math.abs(val - 4.5) / 4.5
            };
        }

        function logicPrimeSum(periodNumber) {
            const digits = periodNumber.slice(-4).split('').map(Number);
            const sum = digits.reduce((a, b) => a + b, 0);
            return {
                prediction: isPrime(sum) ? 'BIG' : 'SMALL',
                confidence: 0.7
            };
        }

        function logicOddEven(periodNumber) {
            const digits = periodNumber.slice(-4).split('').map(Number);
            return {
                prediction: digits.reduce((a, b) => a + b, 0) % 2 !== 0 ? 'BIG' : 'SMALL',
                confidence: 0.6
            };
        }

        function logicRepeatPattern(periodNumber) {
            const digits = periodNumber.slice(-4).split('');
            return {
                prediction: new Set(digits).size <= 2 ? 'BIG' : 'SMALL',
                confidence: 0.65
            };
        }

        function logicDigitTrend(periodNumber) {
            const digits = periodNumber.slice(-4).split('').map(Number);
            const isAscending = digits.every((val, i, arr) => i === 0 || val >= arr[i - 1]);
            const isDescending = digits.every((val, i, arr) => i === 0 || val <= arr[i - 1]);
            return {
                prediction: isAscending || isDescending ? 'BIG' : 'SMALL',
                confidence: 0.75
            };
        }

        function logicMiddleAvg(periodNumber) {
            const digits = periodNumber.slice(-4).split('').map(Number);
            const avg = (digits[1] + digits[2]) / 2;
            return {
                prediction: avg >= 5 ? 'BIG' : 'SMALL',
                confidence: 0.8
            };
        }

        function logicTrapAvoidance(periodNumber) {
            const digits = periodNumber.slice(-4).split('').map(Number);
            return {
                prediction: (digits[0] === digits[3] || digits[1] === digits[2]) ? 'SMALL' : 'BIG',
                confidence: 0.85
            };
        }

        function logicFibWeight(periodNumber) {
            const fibWeights = [1, 1, 2, 3];
            const digits = periodNumber.slice(-4).split('').map(Number);
            const total = digits.reduce((sum, d, i) => sum + d * fibWeights[i], 0);
            return {
                prediction: total % 10 >= 5 ? 'BIG' : 'SMALL',
                confidence: Math.abs((total % 10) - 4.5) / 4.5
            };
        }

        // Master Prediction Function
        function advancedPrediction(periodNumber) {
            const results = state.strategies.map(strategy => {
                const result = strategy.fn(periodNumber);
                return {
                    ...result,
                    weight: strategy.weight
                };
            });

            let bigScore = 0;
            let smallScore = 0;
            let totalConfidence = 0;
            
            results.forEach(result => {
                if (result.prediction === 'BIG') {
                    bigScore += result.confidence * result.weight;
                } else {
                    smallScore += result.confidence * result.weight;
                }
                totalConfidence += result.confidence;
            });

            const finalPrediction = bigScore > smallScore ? 'BIG' : 'SMALL';
            const confidence = Math.abs(bigScore - smallScore) / (bigScore + smallScore);
            
            return {
                prediction: finalPrediction,
                confidence: confidence
            };
        }

        // API Functions
        async function fetchGameResult() {
            try {
                const timestamp = Math.floor(Date.now() / 1000);
                const response = await fetch(config.apiEndpoint, {
                    method: "POST",
                    headers: config.apiHeaders,
                    body: JSON.stringify({
                        pageSize: 10,
                        pageNo: 1,
                        typeId: 1,
                        language: 0,
                        random: "4a0522c6ecd8410496260e686be2a57c",
                        signature: "334B5E70A0C9B8918B0B15E517E2069C",
                        timestamp: timestamp
                    })
                });

                const data = await response.json();
                if (!data?.data?.list?.length) return null;

                const latestResult = data.data.list[0];
                return { 
                    period: latestResult.issueNumber, 
                    result: parseInt(latestResult.number, 10) 
                };
            } catch (error) {
                console.error("API Error:", error);
                return null;
            }
        }

        // Update Functions
        async function updatePrediction() {
            const apiResult = await fetchGameResult();
            if (!apiResult) return;

            if (apiResult.period !== state.lastFetchedPeriod) {
                state.lastFetchedPeriod = apiResult.period;
                state.currentPeriod = (BigInt(apiResult.period) + 1n).toString();
                
                const prediction = advancedPrediction(state.currentPeriod);
                state.currentPrediction = prediction;
                
                elements.period.textContent = state.currentPeriod;
                updatePredictionUI(prediction);
                
                state.history.unshift({
                    period: state.currentPeriod,
                    prediction: prediction.prediction,
                    result: 'Pending',
                    actualResult: null
                });
                
                if (state.history.length > config.maxHistoryItems) {
                    state.history.pop();
                }
                
                updateHistoryUI();
            }
        }

        async function updateResult() {
            const apiResult = await fetchGameResult();
            if (!apiResult) return;

            const historyItem = state.history.find(item => item.period === apiResult.period);
            if (historyItem && historyItem.result === 'Pending') {
                const isBig = apiResult.result >= 5;
                const isCorrect = (historyItem.prediction === 'BIG' && isBig) || 
                                (historyItem.prediction === 'SMALL' && !isBig);
                
                historyItem.result = isCorrect ? 'Win' : 'Loss';
                historyItem.actualResult = isBig ? 'BIG' : 'SMALL';
                
                updateHistoryUI();
            }
        }

        // UI Update Functions
        function updatePredictionUI(prediction) {
            elements.currentPrediction.textContent = prediction.prediction;
            elements.currentPrediction.className = `prediction-value ${prediction.prediction.toLowerCase()} fade-in`;
            
            const confidencePercent = Math.round(prediction.confidence * 100);
            elements.confidenceLevel.style.width = `${confidencePercent}%`;
            elements.confidencePercent.textContent = `${confidencePercent}%`;
            
            setTimeout(() => {
                elements.currentPrediction.classList.remove('fade-in');
            }, 600);
        }

        function updateHistoryUI() {
            elements.historyTable.innerHTML = state.history.map((item, index) => {
                const rowClass = index === 0 ? 'highlight' : '';
                return `
                    <tr class="${rowClass}">
                        <td>${item.period}</td>
                        <td class="${item.prediction.toLowerCase()}">${item.prediction}</td>
                        <td>
                            ${item.result === 'Pending' ? 
                                '<span class="loading"></span>' : 
                                `<span class="${item.result.toLowerCase()}">${item.result}</span>`}
                        </td>
                    </tr>
                `;
            }).join('');
            
            // Remove highlight after animation
            setTimeout(() => {
                const rows = elements.historyTable.querySelectorAll('tr');
                rows.forEach(row => row.classList.remove('highlight'));
            }, 1500);
        }

        // Initialize
        function init() {
            setInterval(updatePrediction, config.updateInterval);
            setInterval(updateResult, config.updateInterval);
            updatePrediction();
            updateResult();
        }

        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
