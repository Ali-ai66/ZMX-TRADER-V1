<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            flex-direction: column;
            font-family: 'Courier New', monospace;
            color: #fff;
            overflow: hidden;
            position: relative;
            background: radial-gradient(ellipse at bottom, #1B2735 0%, #090A0F 100%);
        }

        #particles-js {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: -1;
            background-color: transparent;
        }

        .container {
            width: 380px;
            padding: 30px;
            background-color: rgba(0, 0, 0, 0.85);
            border-radius: 15px;
            box-shadow: 0 0 35px rgba(43, 63, 186, 0.4);
            text-align: center;
            border: 1px solid rgba(43, 63, 186, 0.3);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(5px);
        }

        .container::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #2B3FBA, #00ff00, #2B3FBA);
            z-index: -1;
            border-radius: 16px;
            opacity: 0.15;
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            0% { filter: hue-rotate(0deg); }
            100% { filter: hue-rotate(360deg); }
        }

        .title {
            font-size: 28px;
            font-weight: bold;
            color: #2B3FBA;
            text-transform: uppercase;
            margin-bottom: 25px;
            letter-spacing: 2px;
            text-shadow: 0 0 15px rgba(43, 63, 186, 0.7);
            position: relative;
        }

        .title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 2px;
            background: linear-gradient(90deg, transparent, #2B3FBA, transparent);
        }

        .timer {
            font-size: 52px;
            margin: 25px 0;
            font-family: 'Digital', monospace;
            letter-spacing: 3px;
            color: #fff;
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
            background: rgba(0, 0, 0, 0.3);
            padding: 10px 20px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .period, .bet {
            font-size: 20px;
            margin: 15px 0;
            color: #aaa;
            letter-spacing: 1px;
        }

        .bet {
            font-size: 32px;
            margin: 30px 0;
            font-weight: bold;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .red { 
            color: #ff4444;
            text-shadow: 0 0 15px rgba(255, 68, 68, 0.7);
        }
        
        .green { 
            color: #44ff44;
            text-shadow: 0 0 15px rgba(68, 255, 68, 0.7);
        }

        @keyframes pulse {
            0% { opacity: 0.8; transform: scale(0.98); }
            50% { opacity: 1; transform: scale(1.01); }
            100% { opacity: 0.8; transform: scale(0.98); }
        }

        .pulse {
            animation: pulse 2s infinite ease-in-out;
        }

        .glow {
            animation: glow 3s infinite alternate;
        }

        @keyframes glow {
            from { box-shadow: 0 0 10px -10px #2B3FBA; }
            to { box-shadow: 0 0 20px 5px #2B3FBA; }
        }
    </style>
</head>
<body>
    <div id="particles-js"></div>
    
    <div class="container glow">
        <div class="title">ZENITH PVT SERVER</div>
        <div id="timeRemaining" class="timer pulse">00:00:00</div>
        <div id="issueNumber" class="period">Loading...</div>
        <div id="predictedNumber" class="bet">Loading...</div>
    </div>

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        // Initialize particles.js
        particlesJS("particles-js", {
            "particles": {
                "number": {
                    "value": 80,
                    "density": {
                        "enable": true,
                        "value_area": 800
                    }
                },
                "color": {
                    "value": "#2B3FBA"
                },
                "shape": {
                    "type": "circle",
                    "stroke": {
                        "width": 0,
                        "color": "#000000"
                    },
                    "polygon": {
                        "nb_sides": 5
                    }
                },
                "opacity": {
                    "value": 0.5,
                    "random": true,
                    "anim": {
                        "enable": true,
                        "speed": 1,
                        "opacity_min": 0.1,
                        "sync": false
                    }
                },
                "size": {
                    "value": 3,
                    "random": true,
                    "anim": {
                        "enable": true,
                        "speed": 2,
                        "size_min": 0.1,
                        "sync": false
                    }
                },
                "line_linked": {
                    "enable": true,
                    "distance": 150,
                    "color": "#2B3FBA",
                    "opacity": 0.3,
                    "width": 1
                },
                "move": {
                    "enable": true,
                    "speed": 1,
                    "direction": "none",
                    "random": true,
                    "straight": false,
                    "out_mode": "out",
                    "bounce": false,
                    "attract": {
                        "enable": true,
                        "rotateX": 600,
                        "rotateY": 1200
                    }
                }
            },
            "interactivity": {
                "detect_on": "canvas",
                "events": {
                    "onhover": {
                        "enable": true,
                        "mode": "grab"
                    },
                    "onclick": {
                        "enable": true,
                        "mode": "push"
                    },
                    "resize": true
                },
                "modes": {
                    "grab": {
                        "distance": 140,
                        "line_linked": {
                            "opacity": 0.7
                        }
                    },
                    "push": {
                        "particles_nb": 4
                    }
                }
            },
            "retina_detect": true
        });

        document.addEventListener('DOMContentLoaded', function() {
            const predictedNumberElement = document.getElementById('predictedNumber');
            const timerElement = document.getElementById('timeRemaining');
            const issueNumberElement = document.getElementById('issueNumber');

            // Categorize Big/Small and Color Coding
            const categorizeNumber = (number) => number <= 4 ? 'Small' : 'Big';
            const getNumberColor = (number) => [0, 2, 4, 6, 8].includes(number) ? 'red' : 'green';

            // Simple prediction based on period
            const generatePrediction = (period) => {
                let lastThreeDigits = parseInt(period.slice(-3));
                return (lastThreeDigits % 10 + Math.floor(Math.random() * 3)) % 10;
            };

            // Fetch period data
            const fetchGameIssue = async () => {
                try {
                    const requestData = {
                        typeId: 1, language: 0,
                        random: "f8dcb5c527814db68800e3946a2b60e8",
                        signature: "08CF7FF3339ED58D4743F4B650FCBEA9",
                        timestamp: Math.floor(Date.now() / 1000)
                    };

                    const response = await fetch('https://api.bdg88zf.com/api/webapi/GetGameIssue', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(requestData)
                    });

                    return response.json();
                } catch (error) {
                    console.error('Error fetching game issue:', error);
                    return null;
                }
            };

            const updatePrediction = async () => {
                const data = await fetchGameIssue();
                if (!data || !data.data || !data.data.issueNumber) {
                    // Use cached data if API fails
                    const cachedPrediction = JSON.parse(localStorage.getItem('lastPrediction'));
                    const cachedPeriod = localStorage.getItem('lastPeriod');
                    
                    if (cachedPrediction && cachedPeriod) {
                        issueNumberElement.textContent = `${cachedPeriod}`;
                        predictedNumberElement.innerHTML = ` <span class="${cachedPrediction.color}">${cachedPrediction.number} (${cachedPrediction.category})</span>`;
                    }
                    return;
                }

                let currentPeriod = data.data.issueNumber;
                let lastDigit = parseInt(currentPeriod.slice(-1));
                let newPeriod = currentPeriod.slice(0, -1) + ((lastDigit) % 10);

                if (localStorage.getItem('lastPeriod') !== newPeriod) {
                    const predictedNumber = generatePrediction(currentPeriod);
                    const predictedCategory = categorizeNumber(predictedNumber);
                    const colorClass = getNumberColor(predictedNumber);

                    const predictionData = { 
                        number: predictedNumber, 
                        category: predictedCategory, 
                        color: colorClass 
                    };

                    localStorage.setItem('lastPrediction', JSON.stringify(predictionData));
                    localStorage.setItem('lastPeriod', newPeriod);

                    issueNumberElement.textContent = ` ${newPeriod}`;
                    predictedNumberElement.innerHTML = ` <span class="${colorClass}">${predictedNumber} (${predictedCategory})</span>`;
                }
            };

            const updateTimer = async () => {
                const data = await fetchGameIssue();
                if (!data || !data.data) {
                    // If API fails, show cached timer or generic message
                    timerElement.textContent = "--:--:--";
                    timerElement.classList.remove('pulse');
                    return;
                }

                const { endTime } = data.data;
                const endDate = new Date(endTime);
                const now = new Date();
                const remainingTimeMs = endDate - now;

                if (remainingTimeMs <= 0) {
                    timerElement.textContent = "00:00:00";
                    timerElement.classList.add('pulse');
                    updatePrediction();
                } else {
                    const hours = String(Math.floor(remainingTimeMs / 3600000)).padStart(2, '0');
                    const minutes = String(Math.floor((remainingTimeMs % 3600000) / 60000)).padStart(2, '0');
                    const seconds = String(Math.floor((remainingTimeMs % 60000) / 1000)).padStart(2, '0');
                    timerElement.textContent = `${hours}:${minutes}:${seconds}`;
                    timerElement.classList.remove('pulse');
                }
            };

            // Initialize and auto-refresh every second
            updatePrediction();
            updateTimer();
            setInterval(() => {
                updatePrediction();
                updateTimer();
            }, 1000);
        });
    </script>
</body>
</html>
